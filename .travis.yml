language: csharp  
dist: trusty
sudo: required 

mono: none
dotnet: 1.0.0

addons:  
  apt:
    packages:
    - python3

services:
  - docker
  
install:
 - nuget install NUnit.Console -Version 3.6.0 -OutputDirectory nunitconsole

script:
 - python ./Build.py --onlyBuild any
 - ./nunitconsole/NUnit.Console.3.6.0/tools/nunit-console.exe ./UKSFWebsite.api.tests/UKSFWebsite.api.tests.csproj
 - python ./Build.py --Docker
 
before_deploy:
 - pip install ovh
 - pip install paramiko
 
deploy:
-   provider: script
    script: python ./Build.py --Deploy
    on:
        branch: config/deploy
-   provider: script
    script: python ./Build.py --Deploy
    on:
        branch: master

os: linux